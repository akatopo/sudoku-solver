$(function(){var e,t,n,r,i,s,o=9;e=Backbone.Model.extend({defaults:function(){return{value:""}}}),t=Backbone.Collection.extend({model:e}),n=new t,r=Backbone.View.extend({tagName:"input",attributes:{maxlength:"1"},events:{keyup:"updateModel"},initialize:function(){this.listenTo(this.model,"change",this.render)},updateModel:function(){this.model.set({value:this.$el.val()},{silent:!0})},render:function(){return this.$el.val(this.model.get("value")),this}}),i=Backbone.View.extend({el:$("body"),events:{"click .solve-button:not(.disabled)":"solve","click .clear-grid-button":"clearGrid"},initialize:function(){var t=new Int32Array([0,0,3,4,5,6,7,8,0,0,5,6,7,0,0,1,2,3,7,8,9,0,2,3,4,5,6,2,0,4,0,6,7,8,9,1,5,6,7,0,9,1,2,3,4,8,0,1,0,3,4,5,6,7,3,4,5,0,7,8,9,1,2,6,7,8,0,1,2,3,4,5,9,0,2,3,0,5,6,0,0]),i=0;$(".sudoku-grid tbody tr td").each(function(t){var i=t/o|0,s=t-i*o,u=new e,a=new r({className:(s!==0&&s%3===0?"lb ":"")+(i!==0&&i%3===0?"tb":""),model:u});n.add(u),$(this).append(a.render().el)}),n.each(function(e){e.set({value:t[i]===0?"":t[i]}),i+=1},this)},solve:function(){var e=this,t=new Int32Array(o*o),r=0,i;$(".solve-button").addClass("disabled").html("Solving"),n.each(function(e){t[r]=e.get("value")*1,r+=1},this),window.Worker?(i=new Worker("js/solver_worker.js"),i.onmessage=function(t){var i=t.data;console.log("Done in "+i.elapsedTime+" ms"),r=0,n.each(function(e){e.set({value:i.result[r]}),r+=1},e),$(".solve-button").removeClass("disabled").html("Solve")},i.postMessage({arr:t})):setTimeout(function(){var i=9,s,o,u,a;s=Module.cwrap("solve_array","number",["number"]),o=Module._malloc(t.byteLength),Module.HEAP32.set(t,o>>2),u=Date.now(),s(o),a=Date.now()-u,t=Module.HEAP32.subarray(o>>2,o+t.byteLength>>2),console.log("Done in "+a+" ms"),r=0,n.each(function(e){e.set({value:t[r]}),r+=1},e),$(".solve-button").removeClass("disabled")},0)},clearGrid:function(){n.each(function(e){e.set({value:""})},this)}}),s=new i});